name: Nightly Release Internal

on:
  schedule:
    - cron: "0 2 * * 1-4"  # Every Monâ€“Thu at 02:00 UTC (03:00 UK/BST)

  workflow_dispatch:

jobs:
  # ---------------------------------------
  # ðŸ”– Checks for Commits & Tags Release
  # ---------------------------------------
  tag-release:
    uses: ./.github/workflows/tag_release.yml

  # -------------------------------------------
  # ðŸ§© Versioning - Bump Version Code & Name
  # -------------------------------------------
  version-bump:
    needs: [tag-release]
    uses: ./.github/workflows/version_bump.yml
    secrets: inherit

  # -----------------------------------------------
  # ðŸš€ Tags the Release & Generates Release Notes
  # -----------------------------------------------
  github-release:
    needs: [tag-release, poll-version-bump-pr-merge]
    uses: ./.github/workflows/github_release.yml
    with:
      release_tag: ${{ needs.tag-release.outputs.RELEASE_TAG }}
    secrets: inherit
