name: Assemble Release AAB
on:
  workflow_call:
    inputs:
      version:
        required: true
        type: string

jobs:
  build:
    uses: ./.github/workflows/build_sign.yml
    with:
      version:        ${{ inputs.version }}
      assembleScript: .github/scripts/assemble_release_aab.sh
      outputDir:      app/build/outputs/bundle/release
      unsignedName:   app-release.aab
      artifactPrefix: spacex-release
    secrets:
      signingKey:       ${{ secrets.SIGNING_KEY }}
      alias:            ${{ secrets.ALIAS }}
      keyStorePassword: ${{ secrets.KEY_STORE_PASSWORD }}
      keyPassword:      ${{ secrets.KEY_PASSWORD }}
